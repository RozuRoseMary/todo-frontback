{"ast":null,"code":"var _jsxFileName = \"D:\\\\CC11D\\\\node\\\\todo-frontback\\\\cc11-basic-todo-list\\\\src\\\\contexts\\\\TodoContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from \"react\";\nimport axios from \"../config/axios\";\nimport { getAllTodo } from \"../api/todo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TodoContext = /*#__PURE__*/createContext();\n\nfunction TodoContextProvider(props) {\n  _s();\n\n  const [todoList, setTodoList] = useState([]);\n\n  const createTodo = title => {\n    axios.post(\"/todos/createTodo\", {\n      title,\n      completed: false\n    }).then(res => {\n      const newTodo = res.data.todo;\n      const newTodoList = [newTodo, ...todoList];\n      setTodoList(newTodoList);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const removeTodo = id => {\n    axios.delete(`/todos/${id}`).then(() => {\n      const idx = todoList.findIndex(el => el.id === id);\n\n      if (idx !== -1) {\n        const clonedTodoList = [...todoList];\n        clonedTodoList.splice(idx, 1);\n        setTodoList(clonedTodoList);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const updateTodo = (newValue, id) => {\n    axios.put(\"/todos/\" + id, newValue).then(() => {\n      const idx = todoList.findIndex(el => el.id === id);\n\n      if (idx !== -1) {\n        const clonedTodoList = [...todoList];\n        clonedTodoList[idx] = { ...clonedTodoList[idx],\n          ...newValue\n        };\n        setTodoList(clonedTodoList);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    const fetchTodo = async () => {\n      const todos = await getAllTodo();\n      setTodoList(todos);\n    };\n\n    fetchTodo();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(TodoContext.Provider, {\n    value: {\n      todoList,\n      createTodo,\n      removeTodo,\n      updateTodo\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TodoContextProvider, \"hGGsNTuaOn7oyphipNa0xsYj1Yc=\");\n\n_c = TodoContextProvider;\nexport { TodoContext, TodoContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"TodoContextProvider\");","map":{"version":3,"sources":["D:/CC11D/node/todo-frontback/cc11-basic-todo-list/src/contexts/TodoContext.js"],"names":["createContext","useState","useEffect","axios","getAllTodo","TodoContext","TodoContextProvider","props","todoList","setTodoList","createTodo","title","post","completed","then","res","newTodo","data","todo","newTodoList","catch","err","console","log","removeTodo","id","delete","idx","findIndex","el","clonedTodoList","splice","updateTodo","newValue","put","fetchTodo","todos","children"],"mappings":"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","sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\nimport axios from \"../config/axios\";\r\nimport { getAllTodo } from \"../api/todo\";\r\n\r\nconst TodoContext = createContext();\r\n\r\nfunction TodoContextProvider(props) {\r\n  const [todoList, setTodoList] = useState([]);\r\n\r\n  const createTodo = (title) => {\r\n    axios\r\n      .post(\"/todos/createTodo\", { title, completed: false })\r\n      .then((res) => {\r\n        const newTodo = res.data.todo;\r\n        const newTodoList = [newTodo, ...todoList];\r\n        setTodoList(newTodoList);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const removeTodo = (id) => {\r\n    axios\r\n      .delete(`/todos/${id}`)\r\n      .then(() => {\r\n        const idx = todoList.findIndex((el) => el.id === id);\r\n        if (idx !== -1) {\r\n          const clonedTodoList = [...todoList];\r\n          clonedTodoList.splice(idx, 1);\r\n          setTodoList(clonedTodoList);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const updateTodo = (newValue, id) => {\r\n    axios\r\n      .put(\"/todos/\" + id, newValue)\r\n      .then(() => {\r\n        const idx = todoList.findIndex((el) => el.id === id);\r\n        if (idx !== -1) {\r\n          const clonedTodoList = [...todoList];\r\n          clonedTodoList[idx] = { ...clonedTodoList[idx], ...newValue };\r\n          setTodoList(clonedTodoList);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchTodo = async () => {\r\n      const todos = await getAllTodo();\r\n      setTodoList(todos);\r\n    };\r\n    fetchTodo();\r\n  }, []);\r\n\r\n  return (\r\n    <TodoContext.Provider\r\n      value={{ todoList, createTodo, removeTodo, updateTodo }}\r\n    >\r\n      {props.children}\r\n    </TodoContext.Provider>\r\n  );\r\n}\r\n\r\nexport { TodoContext, TodoContextProvider };\r\n"]},"metadata":{},"sourceType":"module"}